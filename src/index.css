@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --c-background: 10 10 15; /* #0a0a0f */
    --c-foreground: 224 224 224; /* #e0e0e0 */
    --c-card: 18 18 26; /* #12121a */
    --c-muted: 28 28 46; /* #1c1c2e */
    --c-muted-foreground: 107 114 128; /* #6b7280 */
    --c-accent: 0 255 136; /* #00ff88 */
    --c-accent-secondary: 255 0 255; /* #ff00ff */
    --c-accent-tertiary: 0 212 255; /* #00d4ff */
    --c-border: 42 42 58; /* #2a2a3a */
    --c-input: 18 18 26; /* #12121a */
    --c-ring: 0 255 136; /* #00ff88 */
    --c-destructive: 255 51 102; /* #ff3366 */

    --font-heading: "Orbitron", "Share Tech Mono", ui-monospace, SFMono-Regular, Menlo,
      Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --font-body: "JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco,
      Consolas, "Liberation Mono", "Courier New", monospace;
    --font-label: "Share Tech Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      "Liberation Mono", "Courier New", monospace;

    --box-shadow-neon: 0 0 5px rgba(0, 255, 136, calc(1 * var(--fx-neon-mult))),
      0 0 10px rgba(0, 255, 136, calc(0.25 * var(--fx-neon-mult)));
    --box-shadow-neon-sm: 0 0 3px rgba(0, 255, 136, calc(1 * var(--fx-neon-mult))),
      0 0 6px rgba(0, 255, 136, calc(0.2 * var(--fx-neon-mult)));
    --box-shadow-neon-lg: 0 0 10px rgba(0, 255, 136, calc(1 * var(--fx-neon-mult))),
      0 0 20px rgba(0, 255, 136, calc(0.4 * var(--fx-neon-mult))),
      0 0 40px rgba(0, 255, 136, calc(0.2 * var(--fx-neon-mult)));
    --box-shadow-neon-secondary: 0 0 5px rgba(255, 0, 255, calc(1 * var(--fx-neon-mult))),
      0 0 20px rgba(255, 0, 255, calc(0.4 * var(--fx-neon-mult)));
    --box-shadow-neon-tertiary: 0 0 5px rgba(0, 212, 255, calc(1 * var(--fx-neon-mult))),
      0 0 20px rgba(0, 212, 255, calc(0.4 * var(--fx-neon-mult)));

    --fx-neon-mult: 1;
    --fx-noise-mult: 1;
    --fx-scanlines-opacity: 0.22;
    --fx-sweep-opacity: 0.12;
  }

  html {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
    letter-spacing: 0.04em;
    min-height: 100vh;
    position: relative;
    isolation: isolate;
    overflow-x: hidden;
  }

  ::selection {
    background: rgb(var(--c-accent) / 0.25);
    color: rgb(var(--c-foreground) / 1);
  }
}

@layer components {
  .cyber-chamfer {
    clip-path: polygon(
      0 14px,
      14px 0,
      calc(100% - 14px) 0,
      100% 14px,
      100% calc(100% - 14px),
      calc(100% - 14px) 100%,
      14px 100%,
      0 calc(100% - 14px)
    );
  }

  .cyber-chamfer-sm {
    clip-path: polygon(
      0 10px,
      10px 0,
      calc(100% - 10px) 0,
      100% 10px,
      100% calc(100% - 10px),
      calc(100% - 10px) 100%,
      10px 100%,
      0 calc(100% - 10px)
    );
  }

  .cyber-grid {
    background-image: linear-gradient(rgb(var(--c-accent) / 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgb(var(--c-accent) / 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
  }

  .cyber-noise {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
    background-size: 200px 200px;
    background-repeat: repeat;
    opacity: calc(0.1 * var(--fx-noise-mult));
  }

  .cyber-glitch {
    position: relative;
    display: inline-block;
    text-shadow: -1px 0 rgb(var(--c-accent-secondary) / 0.8),
      1px 0 rgb(var(--c-accent-tertiary) / 0.8);
    filter: drop-shadow(0 0 18px rgb(var(--c-accent) / 0.25));
  }

  .cyber-glitch::before,
  .cyber-glitch::after {
    content: attr(data-text);
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0.75;
  }

  .cyber-glitch::before {
    transform: translate(-2px, 0);
    color: rgb(var(--c-accent-secondary) / 1);
    mix-blend-mode: screen;
    animation: rgbShift 3.5s ease-in-out infinite;
  }

  .cyber-glitch::after {
    transform: translate(2px, 0);
    color: rgb(var(--c-accent-tertiary) / 1);
    mix-blend-mode: screen;
    animation: glitchSlices 5.2s steps(2, end) infinite;
  }

  .cyber-type {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid rgb(var(--c-accent) / 0.9);
    width: var(--tw-type-width, 28ch);
  }
}

@layer utilities {
  .text-tech {
    font-family: var(--font-label);
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 50;
  opacity: var(--fx-scanlines-opacity);
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.35) 2px,
    rgba(0, 0, 0, 0.35) 4px
  );
}

body::after {
  content: "";
  position: fixed;
  inset: -20vh 0 0 0;
  pointer-events: none;
  z-index: 49;
  opacity: var(--fx-sweep-opacity);
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--c-accent) / 0.18),
      transparent
    ),
    radial-gradient(circle at 10% 10%, rgb(var(--c-accent-secondary) / 0.12), transparent 45%),
    radial-gradient(circle at 90% 20%, rgb(var(--c-accent-tertiary) / 0.12), transparent 50%);
  mix-blend-mode: screen;
  animation: scanlineSweep 5.5s linear infinite;
}

@keyframes rgbShift {
  0%,
  100% {
    text-shadow: -2px 0 #ff00ff, 2px 0 #00d4ff;
  }
  50% {
    text-shadow: 2px 0 #ff00ff, -2px 0 #00d4ff;
  }
}

@keyframes glitchSlices {
  0%,
  92%,
  100% {
    clip-path: inset(0 0 0 0);
    transform: translate(2px, 0);
  }
  94% {
    clip-path: inset(12% 0 72% 0);
    transform: translate(6px, -2px) skewX(-12deg);
  }
  96% {
    clip-path: inset(58% 0 22% 0);
    transform: translate(-8px, 2px) skewX(10deg);
  }
  98% {
    clip-path: inset(30% 0 52% 0);
    transform: translate(4px, 0) skewX(-6deg);
  }
}

@keyframes scanlineSweep {
  0% {
    transform: translateY(-120%);
  }
  100% {
    transform: translateY(120vh);
  }
}

html.scanlines-off {
  --fx-scanlines-opacity: 0;
  --fx-sweep-opacity: 0;
}

html.glitch-off .cyber-glitch::before,
html.glitch-off .cyber-glitch::after {
  display: none;
}

html.glitch-off .cyber-glitch {
  text-shadow: 0 0 18px rgb(var(--c-accent) / 0.25);
}

html.transitions-off .cyber-route-wipe {
  display: none;
}

@keyframes routeWipe {
  0% {
    transform: translateY(-120%);
    opacity: 0;
  }
  15% {
    opacity: 0.95;
  }
  100% {
    transform: translateY(120vh);
    opacity: 0;
  }
}

.cyber-route-wipe {
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--c-accent) / 0.25),
      transparent
    ),
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.25) 2px,
      rgba(0, 0, 0, 0.25) 4px
    );
  mix-blend-mode: screen;
  animation: routeWipe 460ms steps(4, end) 1;
}

@keyframes borderPulse {
  0%,
  100% {
    border-color: rgb(var(--c-accent) / 0.65);
  }
  33% {
    border-color: rgb(var(--c-accent-tertiary) / 0.65);
  }
  66% {
    border-color: rgb(var(--c-accent-secondary) / 0.65);
  }
}

.cyber-border-pulse:hover {
  animation: borderPulse 900ms steps(4, end) infinite;
}

@keyframes neonPulse {
  0% {
    filter: drop-shadow(0 0 0 rgba(0, 255, 136, 0));
  }
  60% {
    filter: drop-shadow(0 0 14px rgba(0, 255, 136, 0.5));
  }
  100% {
    filter: drop-shadow(0 0 0 rgba(0, 255, 136, 0));
  }
}

.cyber-focus-pulse:focus-visible {
  animation: neonPulse 650ms steps(4, end) 1;
}

@media (prefers-reduced-motion: reduce) {
  body::after {
    animation: none;
  }

  .cyber-glitch::before,
  .cyber-glitch::after {
    animation: none;
  }

  .cyber-route-wipe {
    animation: none;
  }

  .cyber-border-pulse:hover {
    animation: none;
  }

  .cyber-focus-pulse:focus-visible {
    animation: none;
  }
}
